DROP USER API_PGTOS;

CREATE USER API_PGTOS IDENTIFIED BY 123;

CREATE TABLE "API_PGTOS"."TIPO_PGTO"
(
  "NUM_SEQ_PGTO" NUMBER(5, 0) NOT NULL ENABLE,
  "DESCR_PGTO" VARCHAR2(10),
  CONSTRAINT "TIPO_PGTO_PK" PRIMARY KEY ("NUM_SEQ_PGTO")
    USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
    TABLESPACE "USERS" ENABLE
) SEGMENT CREATION DEFERRED
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  NOCOMPRESS LOGGING
  TABLESPACE "USERS";

CREATE TABLE "API_PGTOS"."REGISTRO_PGTO_MENSAL"
(
  "NUM_SEQ_RGPGTO" NUMBER(5, 0) NOT NULL ENABLE,
  "DESCR_RGPGTO" VARCHAR2(100),
  "NUM_CLIENTE" NUMBER(5, 0),
  "NUM_TIPO_PGTO" NUMBER(5, 0),
  "DATAHORA_RGPGTO" TIMESTAMP (6),
  "NUM_PEDIDO" NUMBER(5, 0),
  CONSTRAINT "REGISTRO_PGTO_MENSAL_PK" PRIMARY KEY ("NUM_SEQ_RGPGTO")
    USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
    TABLESPACE "USERS" ENABLE
) SEGMENT CREATION DEFERRED
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  NOCOMPRESS LOGGING
  TABLESPACE "USERS";

CREATE TABLE "API_PGTOS"."CLIENTES"
(
  "NUM_SEQ_CLIENTE" NUMBER(5, 0),
  "NOME" VARCHAR2(100),
  "CPF" NUMBER(11, 0),
  CONSTRAINT "CLIENTES_PK" PRIMARY KEY ("NUM_SEQ_CLIENTE")
    USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
    TABLESPACE "USERS" ENABLE
) SEGMENT CREATION DEFERRED
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  NOCOMPRESS LOGGING
  TABLESPACE "USERS";

CREATE TABLE "API_PGTOS"."PEDIDOS"
(
  "NUM_SEQ_PEDIDO" NUMBER(5, 0) NOT NULL ENABLE,
  "DESCR_PEDIDO" VARCHAR2(100),
  "NUM_ITEM" NUMBER(5, 0),
  "VALOR_ITEM" NUMBER(6, 2),
  CONSTRAINT "PEDIDOS_PK" PRIMARY KEY ("NUM_SEQ_PEDIDO")
    USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
    TABLESPACE "USERS" ENABLE
) SEGMENT CREATION DEFERRED
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
  NOCOMPRESS LOGGING
  TABLESPACE "USERS";

ALTER TABLE "API_PGTOS"."REGISTRO_PGTO_MENSAL" ADD CONSTRAINT "REGISTRO_PGTO_MENSAL_TIPO_PGTO_FK" FOREIGN KEY ("NUM_TIPO_PGTO")
  REFERENCES "API_PGTOS"."TIPO_PGTO" ("NUM_SEQ_PGTO") ENABLE;

ALTER TABLE "API_PGTOS"."REGISTRO_PGTO_MENSAL" ADD CONSTRAINT "REGISTRO_PGTO_MENSAL_CLIENTES_FK" FOREIGN KEY ("NUM_CLIENTE")
  REFERENCES "API_PGTOS"."CLIENTES" ("NUM_SEQ_CLIENTE") ENABLE;

ALTER TABLE "API_PGTOS"."REGISTRO_PGTO_MENSAL" ADD CONSTRAINT "REGISTRO_PGTO_MENSAL_PEDIDOS_FK" FOREIGN KEY ("NUM_PEDIDO")
  REFERENCES "API_PGTOS"."PEDIDOS" ("NUM_SEQ_PEDIDO") ENABLE;

COMMENT ON COLUMN API_PGTOS.TIPO_PGTO.NUM_SEQ_PGTO IS 'Sequencial';
COMMENT ON COLUMN API_PGTOS.TIPO_PGTO.DESCR_PGTO IS 'Descricao do tipo de pagamento';

COMMENT ON COLUMN API_PGTOS.REGISTRO_PGTO_MENSAL.NUM_SEQ_RGPGTO IS 'Sequencial';
COMMENT ON COLUMN API_PGTOS.REGISTRO_PGTO_MENSAL.DESCR_RGPGTO IS 'Descricao do pagamento';
COMMENT ON COLUMN API_PGTOS.REGISTRO_PGTO_MENSAL.NUM_CLIENTE IS 'Cliente que realizou o pagamento';
COMMENT ON COLUMN API_PGTOS.REGISTRO_PGTO_MENSAL.NUM_TIPO_PGTO IS 'Tipo de pagamento utilizado na compra';
COMMENT ON COLUMN API_PGTOS.REGISTRO_PGTO_MENSAL.DATAHORA_RGPGTO IS 'Timestamp do pagamento';
COMMENT ON COLUMN API_PGTOS.REGISTRO_PGTO_MENSAL.NUM_PEDIDO IS 'Pedido oriundo do pagamento';

COMMENT ON COLUMN API_PGTOS.CLIENTES.NUM_SEQ_CLIENTE IS 'Sequencial';
COMMENT ON COLUMN API_PGTOS.CLIENTES.NOME IS 'Nome do cliente';
COMMENT ON COLUMN API_PGTOS.CLIENTES.CPF IS 'Cpf do cliente';

COMMENT ON COLUMN API_PGTOS.PEDIDOS.NUM_SEQ_PEDIDO IS 'Sequencial';
COMMENT ON COLUMN API_PGTOS.PEDIDOS.DESCR_PEDIDO IS 'Descricao do pedido';
COMMENT ON COLUMN API_PGTOS.PEDIDOS.NUM_ITEM IS 'Codigo do item do pedido';
COMMENT ON COLUMN API_PGTOS.PEDIDOS.VALOR_ITEM IS 'Valor do item do pedido';

ALTER USER SYS QUOTA UNLIMITED ON USERS;
